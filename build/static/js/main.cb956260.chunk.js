(window.webpackJsonpvideo=window.webpackJsonpvideo||[]).push([[0],{104:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(23),i=a.n(r),c=(a(104),a(36)),s=a(28),l=a(37),d=a(38),u=a(41),m=a(167),p=a(163),v=a(30),h=a.n(v),f=a(42),g=a(15),b=a(51),w=a.n(b),R=a(16),E=a(158),y=a(159),O=a(166),k=a(160),S=a(168),j=a(161),L=a(162),U=a(92),C=a.n(U),B=a(93),M=a.n(B),D=a(31),x=(a(83),"video/mp4"),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).initiateRecording=Object(f.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:t=e.sent,a.video.srcObject=t,a.video.play(),a.mediaRecorder=new MediaRecorder(t),a.chunks=[],a.mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&a.chunks.push(e.data)};case 8:case"end":return e.stop()}},e)})),a.startRecording=function(){var e=Object(f.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.chunks=[],a.mediaRecorder.start(10),e.next=5,a.setState({recording:!0,canSend:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.stopRecording=function(){var e=Object(f.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.mediaRecorder.stop(),e.next=4,a.setState({recording:!1,canSend:!0});case 4:a.saveVideo();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.restartRecording=function(){a.initiateRecording(),a.setState({recording:!1,videoURL:null,canSend:!1})},a.saveVideo=function(){var e=new Blob(a.chunks,{type:x}),t=window.URL.createObjectURL(e);a.setState({video:e}),a.setState({videoURL:t})},a.videoDisplay=function(){return null!=a.state.videoURL?o.a.createElement(E.a,null,o.a.createElement(D.Player,null,o.a.createElement("source",{src:a.state.videoURL,type:"video/mp4"}),o.a.createElement(D.ControlBar,{autoHide:!0},o.a.createElement(D.ForwardControl,{seconds:5,order:3.1})))):null==a.state.videoURL?o.a.createElement(E.a,null,o.a.createElement("video",{style:{width:"100%",height:"400"},ref:function(e){a.video=e},muted:!0},"Video stream not available.")):void 0},a.displayButton=function(){return a.state.canSend&&null!=a.state.videoURL?o.a.createElement("div",null,o.a.createElement(y.a,{size:"large",color:"primary",onClick:function(){a.restartRecording()}},"Restart Recording"),o.a.createElement(y.a,{size:"large",color:"primary",onClick:function(){a.submitVideo(a.state.video)}},"Submit"),o.a.createElement("a",{className:"MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeLarge",tabIndex:"0",type:"button",href:a.state.videoURL,download:w()()+".mp4"},o.a.createElement("span",{className:"MuiButton-label"},"Download"),o.a.createElement("span",{className:"MuiTouchRipple-root"}))):null==a.state.videoURL?!1===a.state.recording?o.a.createElement(y.a,{size:"large",color:"primary",onClick:function(e){return a.startRecording(e)}},"Start Recording"):o.a.createElement(y.a,{size:"large",color:"primary",onClick:function(e){return a.stopRecording(e)}},"Stop Recording"):void 0},a.submitVideo=function(e){var t=window.location.href+"single",n=new FormData;n.append("profile",e,w()()+".mp4"),fetch(t,{method:"POST",mode:"no-cors",body:n}).then(function(e){a.setState({visible:!0,alertColor:"success",alertMessage:"CONGRATS! Your video has been uploaded.",alertIcon:o.a.createElement(C.a,null),canSend:!1,videoURL:null}),a.initiateRecording()}).catch(function(e){return a.setState({visible:!0,alertColor:"danger",alertMessage:"OOPS! Your video was not uploaded.",alertIcon:o.a.createElement(M.a,null),canSend:!0,videoURL:a.state.videoURL}),o.a.createElement(E.a,null,o.a.createElement(D.Player,null,o.a.createElement("source",{src:a.state.videoURL}),o.a.createElement(D.ControlBar,{autoHide:!0},o.a.createElement(D.ForwardControl,{seconds:5,order:3.1}))))})},a.onDismiss=function(){a.setState({visible:!1})},a.state={recording:!1,canSend:!1,videoURL:null,visible:!1,backdrop:"static",alertColor:"",alertMessage:"",alertIcon:""},a.onDismiss=a.onDismiss.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initiateRecording(),"http:"===window.location.protocol&&"localhost"!==window.location.hostname&&(window.location.protocol="https:")}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"mt-5 col-lg-6 offset-lg-3"},o.a.createElement(O.a,{className:e.card},this.videoDisplay(),o.a.createElement(k.a,null,this.displayButton()),o.a.createElement(S.a,{className:"modal-lg",isOpen:this.state.visible,toggle:this.onDismiss,backdrop:this.state.backdrop},o.a.createElement(j.a,null,o.a.createElement(L.a,{color:this.state.alertColor,isOpen:this.state.visible,toggle:this.onDismiss},this.state.alertIcon,this.state.alertMessage))))))}}]),t}(o.a.Component),z=Object(R.a)(function(e){return{card:{maxWidth:"100%"}}})(N),I=(a(139),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,null),o.a.createElement(p.a,{maxWidth:"lg"},o.a.createElement(z,null)))}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,a){},99:function(e,t,a){e.exports=a(140)}},[[99,1,2]]]);
//# sourceMappingURL=main.cb956260.chunk.js.map